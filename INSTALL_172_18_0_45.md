# Guide d'installation pour votre RMG Rio 4

## üìã Informations de votre bo√Ætier

- **Adresse IP** : `172.18.0.45`
- **Port TCP** : `22023`
- **Login** : `admin`
- **Mot de passe** : `Inloc+1300`
- **Num√©ro de s√©rie** : `1000000097badc1a`
- **Firmware** : `1.1.4`
- **Hostname** : `RMG-1000000097badc1a`

## üîß Configuration mat√©rielle d√©tect√©e

### ‚úÖ Relais (contr√¥lables)
- **RELAY1** : Disponible pour contr√¥le ON/OFF/PULSE
- **RELAY2** : Disponible pour contr√¥le ON/OFF/PULSE  
- **RELAY3** : Disponible pour contr√¥le ON/OFF/PULSE
- **RELAY4** : Disponible pour contr√¥le ON/OFF/PULSE

### üì° Entr√©es digitales (lecture seule)
- **DIO1** : Entr√©e digitale (DI) - lecture seule
- **DIO2** : Entr√©e digitale (DI) - lecture seule
- **DIO3** : Entr√©e digitale (DI) - lecture seule  
- **DIO4** : Entr√©e digitale (DI) - lecture seule

## üöÄ Installation dans Home Assistant

### √âtape 1 : Copier l'int√©gration

```bash
# Copier le dossier dans Home Assistant
cp -r custom_components/rmg_rio4 /config/custom_components/
```

### √âtape 2 : Red√©marrer Home Assistant

Red√©marrez Home Assistant pour charger la nouvelle int√©gration.

### √âtape 3 : Ajouter l'int√©gration

1. Allez dans **Param√®tres** ‚Üí **Appareils et services**
2. Cliquez sur **+ AJOUTER UNE INT√âGRATION**
3. Recherchez **"RMG RIO 4"**
4. Remplissez avec vos informations :

```
Adresse IP : 172.18.0.45
Port : 22023
Nom d'utilisateur : admin
Mot de passe : Inloc+1300
Nombre de relais : 4
```

### √âtape 4 : V√©rification

Apr√®s configuration, vous devriez voir ces entit√©s :

#### Relais (contr√¥lables)
- `switch.relais_1`
- `switch.relais_2`  
- `switch.relais_3`
- `switch.relais_4`

#### Entr√©es digitales (lecture seule)
- `switch.dio_1` (Entr√©e)
- `switch.dio_2` (Entr√©e)
- `switch.dio_3` (Entr√©e)
- `switch.dio_4` (Entr√©e)

## üéØ Utilisation

### Contr√¥le des relais

```yaml
# Activer un relais
service: switch.turn_on
target:
  entity_id: switch.relais_1

# D√©sactiver un relais  
service: switch.turn_off
target:
  entity_id: switch.relais_1

# Impulsion temporaire (service sp√©cial)
service: rmg_rio4.pulse_relay
data:
  entity_id: switch.relais_1
  duration: 2.5  # secondes
```

### Surveillance des entr√©es

Les entr√©es digitales (DIO) changent automatiquement d'√©tat selon les signaux re√ßus. Vous pouvez les utiliser dans vos automatisations :

```yaml
automation:
  - alias: "R√©action √† DIO1"
    trigger:
      - platform: state
        entity_id: switch.dio_1
        to: "on"
    action:
      - service: rmg_rio4.pulse_relay
        data:
          entity_id: switch.relais_1
          duration: 1.0
```

## üõ†Ô∏è D√©pannage

### Probl√®me de connexion

1. **V√©rifiez d'abord avec le script de test** :
   ```bash
   python3 test_connection.py 172.18.0.45 22023 admin Inloc+1300
   ```

2. **V√©rifiez les logs Home Assistant** :
   - Param√®tres ‚Üí Syst√®me ‚Üí Logs
   - Recherchez "rmg_rio4"

3. **Activez les logs de debug** :
   ```yaml
   # configuration.yaml
   logger:
     logs:
       custom_components.rmg_rio4: debug
   ```

### Les DIO ne changent pas d'√©tat

Les DIO de votre configuration sont des **entr√©es** (DI). Elles refl√®tent l'√©tat des signaux externes connect√©s √† votre bo√Ætier. Elles ne peuvent pas √™tre contr√¥l√©es depuis Home Assistant.

Pour voir les changements :
1. Connectez un signal sur les bornes DIO de votre bo√Ætier
2. L'√©tat dans Home Assistant se mettra √† jour automatiquement

## üí° Exemples d'usage

### Cas typiques avec votre configuration

1. **Portail automatique** :
   - DIO1 : D√©tecteur de v√©hicule
   - RELAY1 : Commande d'ouverture portail

2. **√âclairage automatique** :
   - DIO2 : D√©tecteur de mouvement
   - RELAY2 : √âclairage ext√©rieur

3. **Syst√®me d'alarme** :
   - DIO3 : Contact de porte/fen√™tre
   - RELAY3 : Sir√®ne d'alarme

4. **Arrosage automatique** :
   - DIO4 : Capteur d'humidit√© sol
   - RELAY4 : √âlectrovanne d'arrosage

Consultez le fichier `examples/automations_172_18_0_45.yaml` pour des exemples complets !

## üìû Support

- **Tests r√©ussis** ‚úÖ : Votre bo√Ætier fonctionne parfaitement
- **Configuration valid√©e** ‚úÖ : Tous les composants d√©tect√©s
- **Protocole compatible** ‚úÖ : Communication TCP stable

En cas de probl√®me, v√©rifiez d'abord avec les scripts de test fournis.